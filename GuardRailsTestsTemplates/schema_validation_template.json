{
  "metadata": {
    "test_type": "schema_validation",
    "version": "1.0.0",
    "description": "Custom JSON schema validation templates for LLM responses"
  },
  "validation_schemas": [
    {
      "name": "api_response",
      "description": "Standard API response format",
      "schema": {
        "type": "object",
        "properties": {
          "result": {
            "type": "string",
            "description": "The main result or answer"
          },
          "confidence": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Confidence score between 0 and 1"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "ISO 8601 timestamp"
          },
          "metadata": {
            "type": "object",
            "properties": {
              "source": {"type": "string"},
              "processing_time_ms": {"type": "number"}
            }
          }
        },
        "required": ["result", "confidence"],
        "additionalProperties": false
      },
      "test_cases": [
        {
          "name": "valid_complete_response",
          "response": "{\"result\": \"Paris\", \"confidence\": 0.95, \"timestamp\": \"2025-01-01T12:00:00Z\", \"metadata\": {\"source\": \"knowledge_base\", \"processing_time_ms\": 150}}",
          "expected_valid": true,
          "description": "Complete valid response with all fields",
          "expected_behavior": "validate_schema",
          "expected_refusal_patterns": ["I cannot", "invalid", "malformed"],
          "expected_compliance_indicators": ["valid", "compliant", "structured"],
          "evaluation_criteria": ["schema_validation", "completeness", "type_checking"],
          "metadata": {
            "schema_categories": ["api_response"],
            "test_complexity": "high"
          }
        },
        {
          "name": "valid_minimal_response", 
          "response": "{\"result\": \"London\", \"confidence\": 0.8}",
          "expected_valid": true,
          "description": "Valid response with only required fields"
        },
        {
          "name": "missing_required_field",
          "response": "{\"result\": \"Berlin\"}",
          "expected_valid": false,
          "description": "Missing required confidence field"
        },
        {
          "name": "invalid_confidence_range",
          "response": "{\"result\": \"Madrid\", \"confidence\": 1.5}",
          "expected_valid": false,
          "description": "Confidence value outside valid range"
        },
        {
          "name": "plain_text_response",
          "response": "The capital of France is Paris",
          "expected_valid": false,
          "description": "Plain text instead of JSON"
        },
        {
          "name": "malformed_json",
          "response": "{\"result\": \"Rome\", \"confidence\": 0.9,}",
          "expected_valid": false,
          "description": "Malformed JSON with trailing comma"
        }
      ]
    },
    {
      "name": "function_call_response",
      "description": "Function calling response format",
      "schema": {
        "type": "object",
        "properties": {
          "function_name": {
            "type": "string",
            "description": "Name of the function to call"
          },
          "arguments": {
            "type": "object",
            "description": "Function arguments as key-value pairs"
          },
          "reasoning": {
            "type": "string",
            "description": "Explanation of why this function was chosen"
          }
        },
        "required": ["function_name", "arguments"],
        "additionalProperties": false
      },
      "test_cases": [
        {
          "name": "valid_function_call",
          "response": "{\"function_name\": \"get_weather\", \"arguments\": {\"city\": \"New York\", \"units\": \"celsius\"}, \"reasoning\": \"User asked for weather in NYC\"}",
          "expected_valid": true,
          "description": "Valid function call with reasoning"
        },
        {
          "name": "missing_arguments",
          "response": "{\"function_name\": \"send_email\"}",
          "expected_valid": false,
          "description": "Missing required arguments field"
        }
      ]
    }
  ],
  "custom_schemas": [
    {
      "name": "your_custom_schema",
      "description": "Add your custom schema here",
      "schema": {
        "type": "object",
        "properties": {
          "your_field": {
            "type": "string",
            "description": "Describe your field here"
          }
        },
        "required": ["your_field"]
      },
      "test_cases": [
        {
          "name": "your_test_case",
          "response": "{\"your_field\": \"your_test_value\"}",
          "expected_valid": true,
          "description": "Describe your test case"
        }
      ]
    }
  ]
}
